name: xxxBuild OTX Server  
on: [push, pull_request]  
  
jobs:  
  build:  
    runs-on: windows-latest  
    steps:  
      - uses: actions/checkout@v4  
        
      - name: Download Boost 1.84.0  
        run: |  
          try {  
            Invoke-WebRequest -Uri "https://sourceforge.net/projects/boost/files/boost-binaries/1.84.0/boost_1_84_0-msvc-14.3-64.exe/download" -OutFile "boost.exe" -UserAgent "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"  
            Start-Process -FilePath "boost.exe" -ArgumentList "/S", "/D=C:\local\boost_1_84_0" -Wait  
          } catch {  
            Write-Error "Failed to download Boost: $_"  
            exit 1  
          }  
        shell: powershell  
        
      - name: Setup MSBuild  
        uses: microsoft/setup-msbuild@v1  
          
      - name: Build  
        run: msbuild sources/msvc/TheOTXServer.vcxproj /p:Configuration=Release /p:Platform=x64  
          
      - name: Upload Artifact  
        uses: actions/upload-artifact@v4  
        with:  
          name: TheOTXServer  
          path: sources/msvc/x64/Release/TheOTXServer.exe
